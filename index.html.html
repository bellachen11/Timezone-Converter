<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone Converter</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#1f2937',
                        'background': '#0f172a',
                        'card': '#1e293b',
                        'text-light': '#f8fafc',
                        'text-muted': '#94a3b8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6366f1;
        }
        
        input[type="date"] {
            color-scheme: dark;
        }
    </style>
</head>
<body class="bg-background min-h-screen text-text-light font-sans p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-extrabold text-primary mb-2">Global Time Clock</h1>
            <p class="text-lg text-text-muted">Enter a time and see the conversion across major global timezones.</p>
        </header>

        <!-- Input Control Panel -->
        <div class="bg-card p-6 rounded-xl shadow-2xl mb-10 border border-primary/50">
            <h2 class="text-xl font-bold mb-4 text-text-light">1. Define the Base Time</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- Date Input -->
                <div class="space-y-2">
                    <label for="base-date" class="block text-sm font-medium text-text-muted">Date:</label>
                    <input type="date" id="base-date"
                           class="w-full p-3 rounded-lg bg-secondary border border-gray-700 focus:border-primary focus:ring focus:ring-primary/50 text-text-light transition duration-150 ease-in-out">
                </div>
                
                <!-- Time Select (Strict 5-minute intervals) -->
                <div class="space-y-2">
                    <label for="base-time-select" class="block text-sm font-medium text-text-muted">Time (5-min intervals):</label>
                    <div class="relative">
                        <select id="base-time-select"
                                class="w-full p-3 rounded-lg bg-secondary border border-gray-700 focus:border-primary focus:ring focus:ring-primary/50 text-text-light appearance-none transition duration-150 ease-in-out cursor-pointer">
                            <!-- Options populated by JS -->
                        </select>
                        <!-- Custom arrow icon for styling consistency -->
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-text-muted">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                </div>

                <!-- Timezone Selector -->
                <div class="space-y-2">
                    <label for="base-timezone" class="block text-sm font-medium text-text-muted">Base Timezone:</label>
                    <select id="base-timezone"
                            class="w-full p-3 rounded-lg bg-secondary border border-gray-700 focus:border-primary focus:ring focus:ring-primary/50 text-text-light appearance-none transition duration-150 ease-in-out cursor-pointer">
                        <!-- Options populated by JS -->
                    </select>
                </div>
            </div>
        </div>

        <!-- Output Display Grid -->
        <div id="timezone-results" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <h2 class="lg:col-span-3 text-2xl font-bold mb-4 text-text-light">2. Converted Times</h2>
            <!-- Timezone cards inserted here -->
        </div>

    </div>

    <script>
        const TARGET_TIMEZONES = [
            { name: "New York, USA", id: "America/New_York", abbr: "EST/EDT" },
            { name: "Los Angeles, USA", id: "America/Los_Angeles", abbr: "PST/PDT" },
            { name: "London, UK", id: "Europe/London", abbr: "GMT/BST" },
            { name: "Paris, France", id: "Europe/Paris", abbr: "CET/CEST" },
            { name: "Dubai, UAE", id: "Asia/Dubai", abbr: "GST" },
            { name: "New Delhi, India", id: "Asia/Kolkata", abbr: "IST" },
            { name: "Tokyo, Japan", id: "Asia/Tokyo", abbr: "JST" },
            { name: "Sydney, Australia", id: "Australia/Sydney", abbr: "AEST/AEDT" },
        ];

        const baseDateInput = document.getElementById('base-date');
        const baseTimeSelect = document.getElementById('base-time-select');
        const baseTimezoneSelect = document.getElementById('base-timezone');
        const timezoneResultsDiv = document.getElementById('timezone-results');

        function formatToDateLocal(date) {
            const pad = (num) => num.toString().padStart(2, '0');
            return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;
        }

        // Generate time options every 5 minutes (00:00 to 23:55)
        function initializeTimeSelector() {
            baseTimeSelect.innerHTML = '';
            for (let h = 0; h < 24; h++) {
                for (let m = 0; m < 60; m += 5) {
                    const hourStr = h.toString().padStart(2, '0');
                    const minStr = m.toString().padStart(2, '0');
                    const value = `${hourStr}:${minStr}`;
                    
                    // Create readable label (e.g., 09:05 AM)
                    const date = new Date();
                    date.setHours(h, m);
                    const label = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false }); // 24h format for clarity, or use true for AM/PM
                    
                    const option = document.createElement('option');
                    option.value = value;
                    option.textContent = label;
                    baseTimeSelect.appendChild(option);
                }
            }
        }

        function initializeBaseTimezoneSelector() {
            const localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const localOption = document.createElement('option');
            localOption.value = localTimeZone;
            localOption.textContent = `Local Time (${localTimeZone})`;
            baseTimezoneSelect.appendChild(localOption);
            
            const uniqueTimezones = TARGET_TIMEZONES.filter(tz => tz.id !== localTimeZone);
            uniqueTimezones.forEach(tz => {
                const option = document.createElement('option');
                option.value = tz.id;
                option.textContent = `${tz.name} (${tz.abbr || tz.id.split('/')[1]})`;
                baseTimezoneSelect.appendChild(option);
            });
            baseTimezoneSelect.value = localTimeZone;
        }

        function initializeResultCards() {
            timezoneResultsDiv.innerHTML = '<h2 class="lg:col-span-3 text-2xl font-bold mb-4 text-text-light">2. Converted Times</h2>';
            TARGET_TIMEZONES.forEach(tz => {
                const card = document.createElement('div');
                card.id = `result-${tz.id.replace('/', '-')}`;
                card.className = "bg-card p-5 rounded-xl shadow-lg border border-gray-700 hover:border-primary transition duration-300 ease-in-out";
                card.innerHTML = `
                    <p class="text-text-muted text-sm font-semibold uppercase">${tz.name}</p>
                    <h3 class="text-2xl font-extrabold mt-1 text-primary time-display">--:--</h3>
                    <p class="text-sm text-text-light date-display"></p>
                    <p class="text-xs text-text-muted timezone-id">${tz.abbr || tz.id}</p>
                `;
                timezoneResultsDiv.appendChild(card);
            });
        }

        function calculateTimes() {
            const dateStr = baseDateInput.value;
            const timeStr = baseTimeSelect.value;
            
            if (!dateStr || !timeStr) return;

            // Combine date and selected time
            const fullDateTimeStr = `${dateStr}T${timeStr}:00`; 
            const localDate = new Date(fullDateTimeStr);

            if (isNaN(localDate.getTime())) return;
            
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true, timeZoneName: 'short' };
            const dateOptions = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };

            TARGET_TIMEZONES.forEach(tz => {
                const targetId = tz.id;
                const card = document.getElementById(`result-${targetId.replace('/', '-')}`);
                if (!card) return;

                try {
                    const timeString = localDate.toLocaleString('en-US', { ...timeOptions, timeZone: targetId });
                    const dateString = localDate.toLocaleString('en-US', { ...dateOptions, timeZone: targetId });
                    card.querySelector('.time-display').textContent = timeString;
                    card.querySelector('.date-display').textContent = dateString;
                } catch (e) {
                    console.error("Error formatting", e);
                }
            });
        }

        window.onload = function() {
            initializeTimeSelector();
            initializeBaseTimezoneSelector();
            initializeResultCards();

            // Set Defaults
            const now = new Date();
            // Round to nearest 5 min
            const minutes = Math.round(now.getMinutes() / 5) * 5;
            now.setMinutes(minutes);
            now.setSeconds(0);

            baseDateInput.value = formatToDateLocal(now);
            
            // Set time select value
            const h = now.getHours().toString().padStart(2, '0');
            const m = now.getMinutes().toString().padStart(2, '0');
            const timeValue = `${h}:${m}`;
            
            // If rounding pushed us to "60" minutes (next hour), handle edge case
            // Simple fallback: if value doesn't exist in list, default to 12:00 or closest
            if (baseTimeSelect.querySelector(`option[value="${timeValue}"]`)) {
                baseTimeSelect.value = timeValue;
            }

            baseDateInput.addEventListener('change', calculateTimes);
            baseTimeSelect.addEventListener('change', calculateTimes);
            baseTimezoneSelect.addEventListener('change', calculateTimes);
            
            calculateTimes();
        };
    </script>
</body>
</html>